<!-- Build page from here: -->
<input type="hidden" value="{session_designation}" name="session_designation" id="session_designation"/>
<input type="hidden" value="{leave_taker_designation}" name="designation" id="designation"/>


<div class="row-fluid seperator">
	<div class="span7">
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>Employee Name:</b></label>
					<label class="form-label span4 clsleft">{emplo_name}</label>
				</div>
			</div>
		</div>
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>Reporting Head:</b></label>
					<label class="form-label span5 clsleft">{reportingHead}</label>
				</div>
			</div>
		</div>
		<!--BeginPhLabel-->
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>Use public holiday:</b></label>
					<label class="form-label span3 clsleft">Yes</label>
				</div>
			</div>
		</div>
		<!--EndPhLabel-->
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>No of days:</b></label>
					<label class="form-label span4 clsleft">{actual_nods}</label>
				</div>
			</div>
		</div>
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>Halfday for:</b></label>
					<label class="form-label span4 clsleft">{halfdayfor_text}</label>
				</div>
			</div>
		</div>
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>Start date:</b></label>
					<label class="form-label span5 clsleft">{new_start_date}</label>
				</div>
			</div>
		</div>
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>Reason:</b></label>
					<label class="form-label span6 clsleft">{actual_reason}</label>
				</div>
			</div>
		</div>
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>Address While on Leave:</b></label>
					<label class="form-label span5 clsleft">{leave_address}</label>
				</div>
			</div>
		</div>
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>contact While on Leave:</b></label>
					<label class="form-label span5 clsleft">{leave_contact}</label>
				</div>
			</div>
		</div>
		<div class="form-row row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<label class="form-label span4"><b>Leave Apply Date:</b></label>
					<label class="form-label span5 clsleft">{apply_actual_date}</label>
				</div>
			</div>
		</div>
		<form name="leaverequest" id="leaverequest" action="" method="post">
			<input type="hidden" name="hdnaction" id="hdnaction" value="update">
			<input type="hidden" name="hdnid" id="hdnid" value="{requested_leave_id}">
			<input type="hidden" name="employeeid" id="employeeid" value="{employee_id}">
			<input type="hidden" value="{leave_isactive}" name="isactive" id="isactive"/>
			<!--BeginDisplayDelegatedTeamLeaderBlock-->
			<input type="hidden" name="deligateTeamLeaderId" id="deligateTeamLeaderId" value="{curdeligateTeamLeaderId}" />
			<!--EndDisplayDelegatedTeamLeaderBlock-->
			
			<!--BeginDisplayDelegatedManagerBlock-->
			<input type="hidden" name="deligateManagerId" id="deligateManagerId" value="{curdeligateManagerId}" />
			<!--EndDisplayDelegatedManagerBlock-->
			<!--BeginFillTemaLeaderEditable-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Status by TL:</b></label>
						<div style="float: left;width: 210px;">
							<select name="status" id="status">
								<option value="0">Please select</option>
								<option value="1">Approved</option>
								<option value="2">Reject</option>
							</select>
						</div>
						<script type="text/javascript">
						if($('{leave_status}') != '')
						{
							$("#status").val("{leave_status}");
						}
					</script>
					</div>
				</div>
			</div>
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Comment by TL:</b></label>
						<textarea id="comment" class="span4 uniform" name="comment">{tl_com}</textarea>
					</div>
				</div>
			</div>
			<!--EndFillTemaLeaderEditable-->
			<!--BeginFillTemaLeaderReadable-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Status by TL:</b></label>
						<label class="form-label span4 clsleft">{status1}</label>
					</div>
				</div>
			</div>
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Comment by TL:</b></label>
						<label class="form-label span4 clsleft">{comment1}</label>
					</div>
				</div>
			</div>
			<!--EndFillTemaLeaderReadable-->
			
			<!--BeginFillManagerEditable-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Status by manager:</b></label>
						<div style="float: left;width: 210px;">
							<select name="status_manager" id="status_manager">
								<option value="0">Please select</option>
								<option value="1">Approved</option>
								<option value="2">Reject</option>
							</select>
						</div>
						<script type="text/javascript">
						if($('{manager_status_id}') != '')
						{
							//alert('{manager_status_id}');
							$("#status_manager").val("{manager_status_id}");
						}
					</script>
					</div>
				</div>
			</div>
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Comment by manager:</b></label>
						<textarea id="comment_manager" class="span4 uniform" name="comment_manager">{comment_manager_readable}</textarea>
					</div>
				</div>
			</div>
			<!--EndFillManagerEditable-->
			<!--BeginFillDeligation-->
			<!--<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Delegate to:</b></label>
						<div style="float: left;width: 210px;">
							<select name="delegate" id="delegate" class="delegate">
								<option value="">Please select</option>-->
								<!--BeginFillTeamLeaders-->
								<!--<option value="{id}">{name}</option>-->
								<!--EndFillTeamLeaders-->
						<!--	</select>
						</div>
						<script type="text/javascript">
						if($('{delegate}') != '')
						{
							//alert('{delegate}');
							$(".delegate").val("{delegate}");
						}
					</script>
					</div>
				</div>
			</div>-->
			<!--EndFillDeligation-->

			<!--BeginFillManagerReadable-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Status by manager:</b></label>
						<label class="form-label span4 clsleft">{status_manager1}</label>
					</div>
				</div>
			</div>
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Comment by manager:</b></label>
						<label class="form-label span4 clsleft">{comment_manager1}</label>
					</div>
				</div>
			</div>
			<!--EndFillManagerReadable-->
			<!--BeginFillDeligationEditable-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Status by delegate TL:</b></label>
						<div style="float: left;width: 210px;">
							<select name="delegate_status" id="delegate_status">
								<option value="0">Please select</option>
								<option value="1">Approved</option>
								<option value="2">Reject</option>
							</select>
						</div>
						<script type="text/javascript">
							if($('{d_s}') != '')
							{
								$("#delegate_status").val("{d_s}");
							}
						</script>
					</div>
				</div>
			</div>
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Comment by delegate TL:</b></label>
						<textarea id="delegate_comment" class="span4 uniform" name="delegate_comment">{d_c}</textarea>
					</div>
				</div>
			</div>
			<!--EndFillDeligationEditable-->

			

			<!--BeginFillDelegationReadable-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Status by Delegate TL:</b></label>
						<label class="form-label span4 clsleft">{status2}</label>
					</div>
				</div>
			</div>
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Comment by Delegate TL:</b></label>
						<label class="form-label span4 clsleft">{comment2}</label>
					</div>
				</div>
			</div>
			<!--EndFillDelegationReadable-->

			<!--BeginFillManagerDeligationEditable-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Status by delegate Manager:</b></label>
						<div style="float: left;width: 210px;">
							<select name="manager_delegate_status" id="manager_delegate_status">
								<option value="0">Please select</option>
								<option value="1">Approved</option>
								<option value="2">Reject</option>
							</select>
						</div>
						<script type="text/javascript">
							if($('{d_m_s}') != '')
							{
								//alert('{d_m_s}');
								$("#manager_delegate_status").val("{d_m_s}");
							}
						</script>
					</div>
				</div>
			</div>
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Comment by delegate Manager:</b></label>
						<textarea id="manager_delegate_comment" class="span4 uniform" name="manager_delegate_comment">{d_m_c}</textarea>
					</div>
				</div>
			</div>
			<!--EndFillManagerDeligationEditable-->

			

			<!--BeginFillManagerDelegationReadable-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Status by Delegate Manager:</b></label>
						<label class="form-label span4 clsleft">{status3}</label>
					</div>
				</div>
			</div>
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span4"><b>Comment by Delegate Manager:</b></label>
						<label class="form-label span4 clsleft">{comment3}</label>
					</div>
				</div>
			</div>
			<!--EndFillManagerDelegationReadable-->
			
			<!--BeginDisplayAdminAddedBlock-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<label class="form-label span8"><b>This leave is added by admin</b></label>
					</div>
				</div>
			</div>
			<!--EndDisplayAdminAddedBlock-->
			
			<!--BeginDisplayActionButtons-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<div class="form-actions">
							<div class="span3"></div>
							<div class="span6 controls">
								<button id="submit" class="btn btn-info marginR10" name="submit" type="submit">Save</button>
								<button id="cancel" class="btn btn-info marginR10" onclick="window.location='halfleave_request.php'" name="cancel" type="button">Cancel</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--EndDisplayActionButtons-->
			<!--BeginDisplayBackButtons-->
			<div class="form-row row-fluid">
				<div class="span12">
					<div class="row-fluid">
						<div class="form-actions">
							<div class="span3"></div>
							<div class="span4 controls">
								<button type="button" class="btn btn-info marginR10" name="back" id="back" onclick="window.location='halfleave_request.php'">Back</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--EndDisplayBackButtons-->
			
		</form>
	</div>
	<div class="span5">
		<div class="box">
			<div class="title">
				<h4> <span class="icon16 brocco-icon-list"></span> <span>Overall leave status of your team</span> </h4>
				<a class="minimize" href="#" style="display: none;">Minimize</a> </div>
			<div class="content">

				<table class="responsive table table-bordered">
					<thead>
						<tr>
							<th>Name</th>
							<th>Days</th>
							<th>Date</th>
						</tr>
					<!--BeginFillLeaveHistory-->
					<tr>
						<td>{empName}</td>
						<td>{noofdays}</td>
						<td>{hstart_date}<br/>{hend_date}</td>
					</tr>
					<!--EndFillLeaveHistory-->
					<!--BeginFillNoLeaveHistory-->
					<tr>
						<td colspan="3">No record found.</td>
					</tr>
					<!--EndFillNoLeaveHistory-->
				</table>
			</div>
		</div>
	</div>
	<div class="span5">
		<div class="box">
			<div class="title">
				<h4> <span class="icon16 brocco-icon-list"></span> <span>Leave history of {emplo_name}</span> </h4>
				<a class="minimize" href="#" style="display: none;">Minimize</a> </div>
			<div class="content">
				<label class="form-label span5"><b>Leave Balance:</b></label>{pending_leave}
				<table class="responsive table table-bordered">
					<thead>
						<tr>
							<th>Days</th>
							<th>Dates</th>
							<th>Status(TL)</th>
							<th>Status(M)</th>

						</tr>
					<!--BeginFillLastThreeLeaves-->
					<tr>
						<td>{number_d}</td>
						<td>{start_d}<br />
						{end_d}</td>
						<td>{Teamleader_status}</td>
						<td>{manager_status}</td>
					</tr>
					<!--EndFillLastThreeLeaves-->
					<!--BeginFillNoLastThreeLeaves-->
					<tr>
						<td colspan="4">No record found.</td>
					</tr>
					<!--EndFillNoLastThreeLeaves-->
				</table>
			</div>
		</div>
	</div>
</div>
<!-- End .row-fluid -->
<script type="text/javascript">
$(document).ready(function(){
	$("#status_manager").change(function()
	{
	//alert($("#status_manager").val());
		if ($("#status_manager").val() == '2' || $("#status_manager").val() == '0')
		{
		//	alert("here"+$("#delegate").val());
			$("#delegate").val('');
		//	alert($("#delegate").val());
			$.uniform.update("#delegate");
		}
	});
//alert('hello');
//alert($("#status_manager").val());
$("#submit").click(function()
{
	if(document.getElementById("status"))
		if ($("#status").val() == "0") { alert('Please select status.'); $("#status").focus(); return false;}
	if(document.getElementById("status_manager"))
		if ($("#status_manager").val() == "0") { alert('Please select status.'); $("#status_manager").focus(); return false;}
	if(document.getElementById("manager_delegate_status"))
		if ($("#manager_delegate_status").val() == "0") { alert('Please select delegate manager status.'); $("#manager_delegate_status").focus(); return false;}
	/*if($("#status_manager").val() == "1")
	{
		if ($("#delegate").val() == '')
	 	{
	 		alert('Please select delegate to.');
			return false;
		}
	}
	if(($("#session_designation").val() == 6 || $("#session_designation").val() == 8 || $("#session_designation").val() == 17) &&  ($("#designation").val() == 7 || $("#designation").val() == 13))
	{
	
		if ($("#status_manager").val() == "2")
		{
		//alert($("#delegate").val());
			if ($("#delegate").val() != '')
	 		{
	 			alert('Cannot delegate responsibility on reject.');
				return false;
			}
		}
	}*/

});

});
</script>
