<!--script class="include" type="text/javascript" src="js/jquery.min.js"></script-->

<script class="include" type="text/javascript" src="js/jquery.jqplot.min.js"></script>

<script class="include" language="javascript" type="text/javascript" src="js/jqplot.dateAxisRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="js/jqplot.canvasTextRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="js/jqplot.canvasAxisTickRenderer.min.js"></script>

<script class="include" language="javascript" type="text/javascript" src="js/jqplot.barRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="js/jqplot.categoryAxisRenderer.min.js"></script>
<script class="include" type="text/javascript" src="js/jqplot.pointLabels.min.js"></script>

    
<div id="content" class="clearfix" style="margin: 0; padding: 0;">
	<div class="contentwrapper">
		<div class="row-fluid">
			<div class="span12">
				<div class="box">
					<div class="title">
						<h4>
						<span class="icon16 brocco-icon-grid"></span>
						<span>Average Report : {date}</span>
						<span style="float:right; margin-right:30px;"><a href="averagescore.php?action=export">Export to excel</a></span>
						</h4>
					</div>
					<div class="content newdivforlevelreport">
						<table class="responsive table table-bordered">
                                <thead>
                                  <tr>
                                    <th>Name</th>
									<th>Total Variance</th>
                                  </tr>
                                </thead>
                                <tbody>
								 <!--BeginFillRecords-->
                                  <tr>
								  <td>
                                    {empname}
									</td>
									<td>
									{average}
									</td>
                                  </tr>
								  <!--EndFillRecords-->
								  <!--BeginFillNoRecord-->
									<tr>
									<td colspan="5">Record not marked</td>
									</tr>
									<!--EndFillNoRecord-->
                                </tbody>
                            </table>
							<input type="hidden" name="empname" id="empname" value="{jsonname}" />
							<input type="hidden" name="empavg" id="empavg" value='{jsonaverage}' />
							<div id="chart1" style=""></div>
					</div>
				</div>
			</div>
		</div>
		<div class="row-fluid">
			<div id="myModal1" class="modal fade hide"></div>
		</div>
	</div>
</div>
<script type="text/javascript">
$(".viewmore").click(function() { 
	var id = $(this).attr("id");
	var arrId = id.split('_');
	var recid = arrId[1];
	var paraid = arrId[2];
	var date = arrId[3];
	var afdid = arrId[4];
	
	$("#view_" + recid + '_' + paraid + '_' + date + '_' + afdid).load('leveldetail.php?paraid=' + paraid + '&recid=' + recid + '&date=' + date + '&afdid=' + afdid);

return false;
});


$(document).ready(function(){
    // Can specify a custom tick Array.
    // Ticks should match up one for each y value (category) in the series.
	console.log($("#empavg").val().split(","));
	//$newvar = "'" + $("#empname").val() + "'";
		//var ticks = ['a','b'];
		var ticks = $("#empname").val().split(",");
		var plot1 = $.jqplot('chart1', [$("#empavg").val().split(",")], {
			// The "seriesDefaults" option is an options object that will
			// be applied to all series in the chart.
			animate: !$.jqplot.use_excanvas,
			seriesDefaults:{
				renderer:$.jqplot.BarRenderer,
				rendererOptions: {
					show: true,
					barMargin: 30,
					shadowOffset: 2,
					shadowDepth: 5
				},
				pointLabels: {show: true, formatString: '%d'}
			},
			axesDefaults: {
							tickRenderer: $.jqplot.CanvasAxisTickRenderer,
							tickOptions: {
							  angle: -30
							}
						  },
			axes: {
						// Use a category axis on the x axis and use our custom ticks.
						xaxis: {
							renderer: $.jqplot.CategoryAxisRenderer,
							ticks: ticks
						},
						// Pad the y axis just a little so bars can get close to, but
						// not touch, the grid boundaries.  1.2 is the default padding.
						yaxis: { 
						min:0, max: 100 
						}
					}
					
		});
	
});
</script>
